<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–ª–µ—Å–æ –ü—å—è–Ω—Å—Ç–≤–∞ v1.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap');

        body { font-family: 'Inter', system-ui, sans-serif; }
        .title-font { font-family: 'Space Grotesk', sans-serif; }

        .wheel-container {
            position: relative;
            width: min(700px, 70vh);
            height: min(700px, 70vh);
            margin: 0 auto;
        }

        .wheel-canvas {
            width: 100%;
            height: 100%;
            border-radius: 9999px;
            box-shadow: 
                0 30px 60px -15px rgb(0 0 0 / 0.5),
                inset 0 5px 8px -1px rgb(255 255 255 / 0.12),
                inset 0 -5px 8px -1px rgb(0 0 0 / 0.4);
        }

        .pointer {
            position: absolute;
            top: 50%;
            right: -25px;
            transform: translateY(-50%);
            z-index: 30;
            filter: drop-shadow(0 10px 20px rgb(244 63 94 / 0.8));
            animation: pointerPulse 1.5s ease-in-out infinite;
        }

        .pointer-arrow {
            width: 0;
            height: 0;
            border-top: 35px solid transparent;
            border-bottom: 35px solid transparent;
            border-right: 55px solid #f43f5e;
            position: relative;
        }

        .pointer-arrow::before {
            content: '';
            position: absolute;
            top: -8px;
            right: -16px;
            width: 16px;
            height: 16px;
            background: #be185d;
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(190, 24, 93, 0.8);
        }

        @keyframes pointerPulse {
            0%, 100% { 
                filter: drop-shadow(0 10px 20px rgb(244 63 94 / 0.6));
                transform: translateY(-50%) scale(1);
            }
            50% { 
                filter: drop-shadow(0 15px 30px rgb(244 63 94 / 1));
                transform: translateY(-50%) scale(1.08);
            }
        }

        .spin-btn {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer !important;
        }

        .spin-btn:hover:not(:disabled) {
            transform: scale(1.05);
        }

        .spin-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed !important;
        }

        .result-card {
            animation: popIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            background: rgba(9, 9, 11, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 0 100px rgba(0,0,0,0.9);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes popIn {
            from { opacity: 0; transform: translate(-50%, -40%) scale(0.9); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        .collapsible-header {
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .collapsible-header:hover {
            background-color: rgba(255, 255, 255, 0.08);
        }

        .collapsible-content {
            max-height: 600px;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .collapsible-content.collapsed {
            max-height: 0;
        }

        .toggle-icon {
            transition: transform 0.3s;
            display: inline-block;
        }

        .toggle-icon.collapsed {
            transform: rotate(-90deg);
        }

        button {
            cursor: pointer !important;
        }

        .winner-indicator {
            position: absolute;
            top: 50%;
            right: 0;
            transform: translateY(-50%) translateX(calc(100% + 35px));
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #18181b;
            padding: 12px 20px;
            border-radius: 16px;
            font-size: 20px;
            font-weight: 900;
            z-index: 35;
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.5);
            animation: winnerPop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: none;
            white-space: nowrap;
        }

        .winner-indicator.show {
            display: block;
        }

        @keyframes winnerPop {
            from { opacity: 0; transform: translateY(-50%) translateX(calc(100% + 20px)) scale(0.8); }
            to { opacity: 1; transform: translateY(-50%) translateX(calc(100% + 35px)) scale(1); }
        }

        .result-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.75);
            backdrop-filter: blur(8px);
            z-index: 90;
            display: none;
        }
        .result-overlay.show {
            display: block;
        }

        input[type="number"] {
            -moz-appearance: textfield;
        }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .health-warning {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #fca5a5;
            padding: 8px 16px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-radius: 6px;
            text-align: center;
            margin-top: 12px;
            width: 100%;
        }
    </style>
</head>
<body class="bg-zinc-950 text-white overflow-hidden">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="w-80 border-r border-zinc-800 flex flex-col hidden md:flex">
            <div class="p-6 border-b border-zinc-800">
                <div class="flex items-center gap-x-3">
                    <div class="w-10 h-10 bg-violet-500 rounded-2xl flex items-center justify-center">
                        <span class="text-2xl">üé≤</span>
                    </div>
                    <div>
                        <div class="title-font text-2xl font-semibold tracking-tighter">–ö–æ–ª–µ—Å–æ</div>
                        <div class="title-font text-xl font-semibold tracking-tighter">–ü—å—è–Ω—Å—Ç–≤–∞</div>
                        <div class="text-xs text-zinc-500 font-mono">v1.0</div>
                    </div>
                </div>
            </div>

            <div class="flex-1 overflow-auto">
                <div class="p-6">
                    <div class="collapsible-header" id="players-header">
                        <div class="flex items-center gap-x-2">
                            <span class="text-lg">üë•</span>
                            <span class="text-sm font-semibold text-zinc-100">–£—á–∞—Å—Ç–Ω–∏–∫–∏</span>
                            <span id="player-count" class="text-xs bg-zinc-700 px-2 py-1 rounded font-mono font-bold">0</span>
                        </div>
                        <span class="toggle-icon text-xl" id="players-toggle">‚ñº</span>
                    </div>

                    <div id="add-player-btn" class="flex items-center gap-x-1.5 text-xs bg-emerald-500 hover:bg-emerald-600 active:scale-95 text-white px-3 py-2 rounded-full font-bold transition-all w-full mb-3 cursor-pointer mt-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                        </svg>
                        <span>–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞</span>
                    </div>

                    <div id="players-list" class="space-y-2 collapsible-content"></div>
                </div>

                <div class="px-6 pb-6 border-t border-zinc-800">
                    <div class="collapsible-header" id="drinks-header">
                        <div class="flex items-center gap-x-2">
                            <span class="text-lg">üçπ</span>
                            <span class="text-sm font-semibold text-zinc-100">–ù–∞–ø–∏—Ç–∫–∏</span>
                            <span id="drink-count" class="text-xs bg-zinc-700 px-2 py-1 rounded font-mono font-bold">5</span>
                        </div>
                        <span class="toggle-icon text-xl" id="drinks-toggle">‚ñº</span>
                    </div>

                    <div id="add-drink-btn" class="flex items-center gap-x-1.5 text-xs bg-amber-500 hover:bg-amber-600 active:scale-95 text-white px-3 py-2 rounded-full font-bold transition-all w-full mb-3 cursor-pointer mt-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                        </svg>
                        <span>–î–æ–±–∞–≤–∏—Ç—å –Ω–∞–ø–∏—Ç–æ–∫</span>
                    </div>

                    <div id="drinks-list" class="space-y-2 collapsible-content"></div>
                </div>
            </div>

            <div class="mt-6 pt-4 border-t border-zinc-800">
                <div id="settings-btn" class="cursor-pointer flex items-center justify-between hover:bg-zinc-900 rounded-xl p-3 group transition-all">
                    <div class="flex items-center gap-x-3">
                        <div class="w-8 h-8 bg-amber-500/20 rounded-xl flex items-center justify-center">
                            <span class="text-amber-400 text-lg">‚öôÔ∏è</span>
                        </div>
                        <div>
                            <div class="text-sm font-semibold">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                            <div class="text-zinc-500 text-xs">–®–∞–Ω—Å—ã –∏ –≤—Ä–µ–º—è</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="border-t border-zinc-800 p-6">
                <div class="flex items-center justify-between mb-3">
                    <div class="uppercase text-xs tracking-widest font-mono text-zinc-400 font-bold">–ò—Å—Ç–æ—Ä–∏—è</div>
                    <div id="clear-history-btn" class="text-zinc-500 hover:text-zinc-300 cursor-pointer text-lg hover:scale-125 transition-transform">üóëÔ∏è</div>
                </div>
                <div id="history-list" class="space-y-2 text-sm max-h-40 overflow-y-auto"></div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col h-full overflow-hidden">
            <div class="h-14 border-b border-zinc-800 flex items-center px-6 bg-zinc-900/50 shrink-0">
                <div class="flex-1 flex items-center gap-x-8">
                    <div id="reset-btn" class="cursor-pointer flex items-center gap-x-2 hover:text-emerald-400 transition-colors p-2 rounded-lg hover:bg-zinc-800 text-lg">
                        <div>‚Ü∫</div>
                        <div class="font-semibold text-sm hidden sm:block">–°–±—Ä–æ—Å–∏—Ç—å</div>
                    </div>
                    <div class="h-5 w-px bg-zinc-800"></div>
                    <div class="flex items-center gap-x-4 text-sm">
                        <div id="current-stage" class="font-bold text-emerald-400">–ì–æ—Ç–æ–≤–æ –∫ –∏–≥—Ä–µ</div>
                        <div class="text-zinc-600 hidden sm:block">/</div>
                        <div id="spin-status" class="text-zinc-500 hidden sm:block">–ù–∞—á–Ω–∏—Ç–µ –ø–µ—Ä–≤—ã–π —Å–ø–∏–Ω</div>
                    </div>
                </div>
            </div>

            <div class="flex-1 flex items-center justify-center p-4 relative overflow-hidden">
                <div id="result-overlay" class="result-overlay"></div>

                <!-- Setup Screen -->
                <div id="setup-screen" class="text-center w-full max-w-2xl mx-auto">
                    <div class="mx-auto w-24 h-24 sm:w-32 sm:h-32 bg-gradient-to-br from-rose-500 to-orange-500 rounded-3xl flex items-center justify-center mb-6 shadow-2xl animate-bounce">
                        <div class="text-5xl sm:text-6xl">üçª</div>
                    </div>
                    <div class="title-font text-5xl sm:text-7xl font-black tracking-tighter mb-2 bg-gradient-to-r from-rose-400 via-orange-400 to-amber-400 bg-clip-text text-transparent">–ö–û–õ–ï–°–û</div>
                    <div class="title-font text-4xl sm:text-6xl font-bold tracking-tighter bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent -mt-2 mb-6">–ü–¨–Ø–ù–°–¢–í–ê</div>
                    <div class="mt-4 text-zinc-300 max-w-md mx-auto text-sm sm:text-base leading-relaxed mb-8 px-4">
                        –î–æ–±–∞–≤—å—Ç–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –Ω–∞–ø–∏—Ç–∫–∏. –ö—Ä—É—Ç–∏—Ç–µ –∫–æ–ª—ë—Å–∞ —Ñ–æ—Ä—Ç—É–Ω—ã, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –∫—Ç–æ –∏ —á—Ç–æ –±—É–¥–µ—Ç –ø–∏—Ç—å! üé∞
                    </div>
                    <div id="start-spin-btn" class="spin-btn mx-auto bg-gradient-to-b from-emerald-400 to-emerald-500 hover:from-emerald-300 hover:to-emerald-400 active:scale-95 text-zinc-950 font-black text-lg sm:text-xl py-5 px-16 sm:px-24 rounded-full shadow-2xl shadow-emerald-500/50 flex items-center justify-center gap-x-3 cursor-pointer w-max">
                        <span class="text-2xl">üé°</span>
                        <span>–ö–†–£–¢–ò–¢–¨!</span>
                    </div>
                    <div class="mt-8 flex justify-center gap-x-12">
                        <div class="text-center">
                            <div id="players-count-display" class="text-3xl sm:text-4xl font-mono font-black text-emerald-400">0</div>
                            <div class="text-xs sm:text-sm text-zinc-500 mt-1">–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</div>
                        </div>
                        <div class="text-center">
                            <div id="drinks-count-display" class="text-3xl sm:text-4xl font-mono font-black text-amber-400">5</div>
                            <div class="text-xs sm:text-sm text-zinc-500 mt-1">–ù–∞–ø–∏—Ç–∫–æ–≤</div>
                        </div>
                    </div>
                </div>

                <!-- Who Wheel Screen -->
                <div id="who-wheel-screen" class="hidden w-full h-full flex flex-col items-center justify-center relative">
                    <div class="absolute top-4 text-center z-10 pointer-events-none">
                        <div class="text-2xl sm:text-4xl font-bold title-font text-emerald-400 tracking-wider drop-shadow-lg">–ö–¢–û –ë–£–î–ï–¢ –ü–ò–¢–¨?</div>
                        <div id="who-spinning-text" class="text-zinc-400 text-sm sm:text-lg font-mono tracking-widest animate-pulse mt-2">–ö—Ä—É—Ç–∏—Ç—Å—è...</div>
                    </div>

                    <div class="relative flex items-center justify-center">
                        <div class="pointer">
                            <div class="pointer-arrow"></div>
                        </div>
                        <div id="who-winner" class="winner-indicator"></div>
                        <div class="wheel-container">
                            <canvas id="who-canvas" class="wheel-canvas" width="700" height="700"></canvas>
                        </div>
                    </div>

                    <div id="who-result" class="hidden result-card p-8 sm:p-12 text-center border-2 border-emerald-500/50">
                        <div class="text-emerald-300 text-xs sm:text-sm font-mono mb-4 uppercase tracking-widest">üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç</div>
                        <div id="who-name" class="text-5xl sm:text-7xl font-black title-font tracking-tight mb-8 bg-gradient-to-r from-emerald-400 to-teal-300 bg-clip-text text-transparent break-words">?</div>
                        <div id="drink-btn" class="spin-btn inline-flex items-center gap-x-3 bg-amber-500 hover:bg-amber-600 active:scale-95 text-zinc-950 px-8 py-4 rounded-full text-base sm:text-lg font-bold shadow-xl shadow-amber-500/50 cursor-pointer w-full justify-center sm:w-auto">
                            <span>üç∏</span>
                            <span>–î–∞–ª–µ–µ: –ù–∞–ø–∏—Ç–æ–∫</span>
                        </div>
                    </div>
                </div>

                <!-- Drink Wheel Screen -->
                <div id="drink-wheel-screen" class="hidden w-full h-full flex flex-col items-center justify-center relative">
                    <div class="absolute top-4 text-center z-10 pointer-events-none">
                        <div class="text-2xl sm:text-4xl font-bold title-font text-amber-400 tracking-wider drop-shadow-lg">–ß–¢–û –ü–ò–¢–¨?</div>
                        <div id="drink-spinning-text" class="text-zinc-400 text-sm sm:text-lg font-mono tracking-widest animate-pulse mt-2">–ö—Ä—É—Ç–∏—Ç—Å—è...</div>
                    </div>

                    <div class="relative flex items-center justify-center">
                        <div class="pointer">
                            <div class="pointer-arrow"></div>
                        </div>
                        <div id="drink-winner" class="winner-indicator"></div>
                        <div class="wheel-container">
                            <canvas id="drink-canvas" class="wheel-canvas" width="700" height="700"></canvas>
                        </div>
                    </div>

                    <div id="drink-result" class="hidden result-card p-8 sm:p-12 text-center border-2 border-amber-500/50">
                        <div class="text-amber-300 text-xs sm:text-sm font-mono mb-4 uppercase tracking-widest">ü•§ –†–µ–∑—É–ª—å—Ç–∞—Ç</div>
                        <div id="drink-who" class="text-2xl sm:text-3xl font-bold mb-4 text-emerald-400 break-words">?</div>
                        <div id="drink-name" class="text-6xl sm:text-8xl title-font font-black tracking-tight mb-4 bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent break-words">?</div>
                        <div id="drink-percent" class="font-mono text-lg sm:text-xl text-amber-300 font-bold mb-8">–®–∞–Ω—Å: ?%</div>
                        <div id="finish-btn" class="spin-btn bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 active:scale-95 text-white px-8 py-4 rounded-full text-base sm:text-lg font-bold shadow-xl shadow-emerald-500/50 cursor-pointer inline-flex items-center justify-center w-full sm:w-auto">
                            <span>‚ú® –ó–∞–≤–µ—Ä—à–∏—Ç—å</span>
                        </div>
                    </div>
                </div>

                <!-- Final Result -->
                <div id="final-result" class="hidden flex flex-col items-center justify-center text-center w-full h-full p-4">
                    <div class="relative mb-8 sm:mb-12 shrink-0">
                        <div class="w-48 h-48 sm:w-64 sm:h-64 bg-gradient-to-br from-rose-500 via-purple-500 to-emerald-500 rounded-full flex items-center justify-center relative shadow-2xl shadow-purple-500/50">
                            <div class="w-40 h-40 sm:w-56 sm:h-56 bg-zinc-950 backdrop-blur-xl rounded-full flex items-center justify-center border-4 border-white/20 flex-col p-4">
                                <div id="final-who" class="text-3xl sm:text-5xl font-black title-font tracking-tighter bg-gradient-to-r from-emerald-400 to-teal-400 bg-clip-text text-transparent mb-1 break-all line-clamp-1">?</div>
                                <div class="text-2xl sm:text-4xl mb-1 sm:mb-2">+</div>
                                <div id="final-drink" class="text-3xl sm:text-5xl font-black title-font tracking-tighter bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent break-all line-clamp-1">?</div>
                            </div>
                        </div>
                        <div class="absolute -top-4 -right-4 bg-gradient-to-r from-yellow-400 to-orange-400 text-zinc-950 text-xl sm:text-2xl font-black px-6 py-2 rounded-2xl shadow-2xl border-2 border-yellow-300/50 animate-spin" style="animation-duration: 8s;">
                            üéâ
                        </div>
                    </div>
                    <div class="uppercase text-xl sm:text-2xl tracking-widest font-mono text-zinc-400 mb-8 font-bold">–†–ï–ó–£–õ–¨–¢–ê–¢</div>
                    <div class="flex flex-col sm:flex-row gap-4 sm:gap-x-12 mb-8 w-full sm:w-auto">
                        <div id="reset-final-btn" class="bg-gradient-to-r from-zinc-700 to-zinc-600 hover:from-zinc-600 hover:to-zinc-500 active:scale-95 text-zinc-100 px-8 sm:px-16 py-4 rounded-full font-bold text-lg shadow-xl hover:shadow-zinc-500/50 transition-all cursor-pointer flex justify-center">
                            ‚Ü∫ –ó–∞–Ω–æ–≤–æ
                        </div>
                        <div id="share-btn" class="bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 active:scale-95 text-white px-8 sm:px-16 py-4 rounded-full font-bold text-lg shadow-xl shadow-emerald-500/50 transition-all cursor-pointer flex justify-center">
                            üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Bar with Credits and Warning -->
            <div class="h-auto border-t border-zinc-800 px-6 py-3 text-xs text-zinc-500 font-mono bg-zinc-900/50 backdrop-blur-sm shrink-0">
                <div class="flex flex-col sm:flex-row items-center justify-between gap-2 text-center sm:text-left">
                    <div class="flex items-center gap-x-2 justify-center sm:justify-start">
                        <span class="text-zinc-600">–°–æ–∑–¥–∞–Ω–æ <span class="text-violet-400 font-bold">OKST4Y</span> & <span class="text-pink-400 font-bold">KOTVMESCHKE</span></span>
                    </div>
                    <div class="flex items-center gap-x-2 justify-center sm:justify-end flex-wrap">
                        <span>–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É:</span>
                        <a href="https://www.twitch.tv/mushketzabey" target="_blank" class="text-purple-400 hover:text-purple-300 underline decoration-purple-400/50 transition-colors font-bold">
                            mushketzabey
                        </a>
                        <span class="text-zinc-600 text-[10px]">(www.twitch.tv/mushketzabey)</span>
                    </div>
                </div>
                <!-- Health Warning -->
                <div class="health-warning">
                    ‚ö†Ô∏è –ß–†–ï–ó–ú–ï–†–ù–û–ï –£–ü–û–¢–†–ï–ë–õ–ï–ù–ò–ï –ê–õ–ö–û–ì–û–õ–Ø –í–†–ï–î–ò–¢ –í–ê–®–ï–ú–£ –ó–î–û–†–û–í–¨–Æ
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="fixed inset-0 bg-black/80 hidden flex items-center justify-center z-50 p-4">
        <div class="modal bg-zinc-900/95 backdrop-blur-xl w-full max-w-2xl rounded-3xl overflow-hidden shadow-2xl border border-zinc-700/50 max-h-[90vh] overflow-y-auto">
            <div class="px-6 sm:px-8 py-6 border-b border-zinc-800 flex items-center justify-between sticky top-0 bg-zinc-900/90 z-10">
                <div>
                    <div class="title-font font-bold text-xl sm:text-2xl tracking-tight">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                    <div class="text-zinc-400 text-xs sm:text-sm mt-1">–®–∞–Ω—Å—ã –Ω–∞–ø–∏—Ç–∫–æ–≤ –∏ –≤—Ä–µ–º—è –≤—Ä–∞—â–µ–Ω–∏—è</div>
                </div>
                <div id="close-settings-btn" class="w-10 h-10 flex items-center justify-center cursor-pointer hover:bg-zinc-800 rounded-2xl transition-all text-2xl hover:scale-110">‚úï</div>
            </div>
            <div class="p-6 sm:p-8">
                <!-- Spin Duration -->
                <div class="mb-8 p-4 bg-zinc-800/50 rounded-xl">
                    <label class="text-sm font-semibold text-emerald-400 mb-3 block flex items-center gap-x-2">
                        <span>‚è±Ô∏è</span>
                        <span>–í—Ä–µ–º—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∫–æ–ª–µ—Å–∞</span>
                    </label>
                    <div class="flex items-center gap-x-4">
                        <input type="number" id="spin-duration-input" min="0.5" max="60" step="0.5" value="4" 
                               class="flex-1 bg-zinc-700 text-white px-4 py-2 rounded-lg font-mono text-lg focus:outline-none focus:ring-2 focus:ring-emerald-400">
                        <span class="text-lg font-mono font-bold text-amber-400 w-16">—Å–µ–∫</span>
                    </div>
                    <div class="text-xs text-zinc-500 mt-3">
                        üí° –í–≤–µ–¥–∏—Ç–µ –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç 0.5 –¥–æ 60 —Å–µ–∫—É–Ω–¥
                    </div>
                    <div class="flex gap-x-2 mt-3">
                        <button onclick="document.getElementById('spin-duration-input').value = '2'" class="flex-1 bg-zinc-700 hover:bg-zinc-600 px-3 py-2 rounded text-xs transition-all">‚ö° 2 —Å–µ–∫</button>
                        <button onclick="document.getElementById('spin-duration-input').value = '4'" class="flex-1 bg-zinc-700 hover:bg-zinc-600 px-3 py-2 rounded text-xs transition-all">‚≠ê 4 —Å–µ–∫</button>
                        <button onclick="document.getElementById('spin-duration-input').value = '8'" class="flex-1 bg-zinc-700 hover:bg-zinc-600 px-3 py-2 rounded text-xs transition-all">üêå 8 —Å–µ–∫</button>
                        <button onclick="document.getElementById('spin-duration-input').value = '15'" class="flex-1 bg-zinc-700 hover:bg-zinc-600 px-3 py-2 rounded text-xs transition-all">üïê 15 —Å–µ–∫</button>
                    </div>
                </div>

                <!-- Drinks Settings -->
                <div class="mb-4">
                    <div class="text-sm font-semibold text-amber-400 mb-3 flex items-center gap-x-2">
                        <span>üçπ</span>
                        <span>–®–∞–Ω—Å—ã –Ω–∞–ø–∏—Ç–∫–æ–≤</span>
                    </div>
                    <div id="drinks-settings" class="space-y-3"></div>
                </div>

                <div class="flex flex-col sm:flex-row gap-4 mt-8 pt-8 border-t border-zinc-800">
                    <div id="randomize-btn" class="flex-1 bg-gradient-to-r from-zinc-700 to-zinc-600 hover:from-zinc-600 hover:to-zinc-500 h-12 rounded-2xl text-sm font-bold uppercase tracking-wide transition-all shadow-lg hover:shadow-zinc-500/50 flex items-center justify-center gap-x-2 cursor-pointer">
                        <span>üîÄ</span>
                        <span>–†–∞–Ω–¥–æ–º</span>
                    </div>
                    <div id="save-settings-btn" class="flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 h-12 rounded-2xl text-sm font-bold uppercase tracking-wide text-zinc-950 shadow-lg hover:shadow-emerald-500/50 transition-all flex items-center justify-center gap-x-2 cursor-pointer">
                        <span>‚úì</span>
                        <span>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let players = [];
        let drinks = [
            { name: '–ü–∏–≤–æ', percent: 35, color: 'fbbf24' },
            { name: '–í–æ–¥–∫–∞', percent: 25, color: 'ec4899' },
            { name: '–í–∏–Ω–æ', percent: 20, color: 'ef4444' },
            { name: '–ö–æ–Ω—å—è–∫', percent: 10, color: '06b6d4' },
            { name: '–†–æ–º', percent: 10, color: '10b981' }
        ];

        let colors = ['fbbf24', 'ec4899', 'ef4444', '06b6d4', '10b981', '8b5cf6', 'f59e0b', 'a855f7', '14b8a6', '3b82f6', 'f97316'];
        let history = [];
        let currentWho = null;
        let currentDrink = null;
        let isSpinning = false;
        let spinDuration = 4000;

        const whoCanvas = document.getElementById('who-canvas');
        const drinkCanvas = document.getElementById('drink-canvas');
        const whoCtx = whoCanvas.getContext('2d');
        const drinkCtx = drinkCanvas.getContext('2d');

        document.getElementById('add-player-btn').addEventListener('click', addPlayer);
        document.getElementById('add-drink-btn').addEventListener('click', addDrink);
        document.getElementById('players-header').addEventListener('click', togglePlayers);
        document.getElementById('drinks-header').addEventListener('click', toggleDrinks);
        document.getElementById('settings-btn').addEventListener('click', showSettings);
        document.getElementById('clear-history-btn').addEventListener('click', clearHistory);
        document.getElementById('reset-btn').addEventListener('click', resetGame);
        document.getElementById('start-spin-btn').addEventListener('click', startWhoSpin);
        document.getElementById('close-settings-btn').addEventListener('click', hideSettings);
        document.getElementById('save-settings-btn').addEventListener('click', saveSettings);
        document.getElementById('randomize-btn').addEventListener('click', randomizeOdds);

        function updateDrinkPercent(index, value) {
            const percent = parseInt(value);
            if (percent >= 1 && percent <= 100) {
                drinks[index].percent = percent;
                renderDrinks();
            }
        }

        function drawWheel(ctx, canvas, items, rotation = 0) {
            const w = canvas.width;
            const h = canvas.height;
            const centerX = w / 2;
            const centerY = h / 2;
            const radius = w / 2.5;

            ctx.clearRect(0, 0, w, h);

            ctx.save();
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius + 15, 0, Math.PI * 2);
            ctx.fillStyle = '#18181b';
            ctx.fill();
            ctx.restore();

            ctx.save();
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius + 4, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(255,255,255,0.08)';
            ctx.fill();
            ctx.restore();

            let angle = rotation;
            let total = 0;
            items.forEach(item => total += item.percent !== undefined ? item.percent : 1);

            const fontSizeTitle = Math.max(14, w / 26);
            const fontSizePercent = Math.max(10, w / 38);

            items.forEach(item => {
                const sliceAngle = (item.percent !== undefined ? item.percent : 1) / total * Math.PI * 2;

                ctx.save();
                ctx.translate(centerX, centerY);
                ctx.rotate(angle);
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.arc(0, 0, radius, 0, sliceAngle);
                ctx.lineTo(0, 0);
                ctx.fillStyle = '#' + item.color;
                ctx.shadowColor = '#' + item.color;
                ctx.shadowBlur = 30;
                ctx.fill();

                ctx.shadowColor = 'rgba(255,255,255,0.4)';
                ctx.shadowBlur = 0;
                ctx.beginPath();
                ctx.arc(0, 0, radius, 0, sliceAngle);
                ctx.strokeStyle = 'rgba(255,255,255,0.6)';
                ctx.lineWidth = 4;
                ctx.stroke();
                ctx.restore();

                ctx.save();
                ctx.translate(centerX, centerY);
                ctx.rotate(angle + sliceAngle / 2);
                ctx.font = `bold ${fontSizeTitle}px Space Grotesk, sans-serif`;
                ctx.fillStyle = '#ffffff';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.shadowColor = 'rgba(0,0,0,0.9)';
                ctx.shadowBlur = 10;
                ctx.shadowOffsetY = 3;
                const displayText = item.name.length > 10 ? item.name.substring(0, 10) + '...' : item.name;
                ctx.fillText(displayText, radius * 0.65, 0);

                if (item.percent !== undefined) {
                    ctx.font = `bold ${fontSizePercent}px monospace`;
                    ctx.fillStyle = 'rgba(255,255,255,0.95)';
                    ctx.shadowBlur = 3;
                    ctx.fillText(item.percent + '%', radius * 0.65, fontSizeTitle);
                }
                ctx.restore();

                angle += sliceAngle;
            });

            ctx.save();
            ctx.beginPath();
            const centerRadius = w / 12;
            ctx.arc(centerX, centerY, centerRadius + 5, 0, Math.PI * 2);
            ctx.fillStyle = '#27272a';
            ctx.fill();
            ctx.beginPath();
            ctx.arc(centerX, centerY, centerRadius, 0, Math.PI * 2);
            const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, centerRadius);
            gradient.addColorStop(0, '#3f3f46');
            gradient.addColorStop(1, '#27272a');
            ctx.fillStyle = gradient;
            ctx.fill();
            ctx.restore();

            for (let i = 0; i < 16; i++) {
                const a = (i / 16) * Math.PI * 2 + rotation;
                const dotRadius = centerRadius * 0.7;
                ctx.save();
                ctx.translate(centerX + Math.cos(a) * dotRadius, centerY + Math.sin(a) * dotRadius);
                ctx.beginPath();
                ctx.arc(0, 0, w/100, 0, Math.PI * 2);
                ctx.fillStyle = '#18181b';
                ctx.shadowColor = '#f43f5e';
                ctx.shadowBlur = 12;
                ctx.fill();
                ctx.restore();
            }
        }

        function getWinnerFromRotation(items, rotation) {
            const normalizedRotation = ((rotation % (Math.PI * 2)) + Math.PI * 2) % (Math.PI * 2);
            const pointerAngle = (Math.PI * 2 - normalizedRotation) % (Math.PI * 2);

            let total = 0;
            items.forEach(item => total += item.percent !== undefined ? item.percent : 1);

            let cumulativeAngle = 0;
            for (let i = 0; i < items.length; i++) {
                const sliceAngle = (items[i].percent !== undefined ? items[i].percent : 1) / total * Math.PI * 2;
                cumulativeAngle += sliceAngle;

                if (pointerAngle <= cumulativeAngle) {
                    return i;
                }
            }

            return 0;
        }

        function addPlayer() {
            const name = prompt('–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞:');
            if (name && name.trim()) {
                players.push({ name: name.trim(), color: colors[players.length % colors.length] });
                renderPlayers();
                drawWheel(whoCtx, whoCanvas, players);
            }
        }

        function deletePlayer(index) {
            players.splice(index, 1);
            players.forEach((p, i) => p.color = colors[i % colors.length]);
            renderPlayers();
            drawWheel(whoCtx, whoCanvas, players);
        }

        function addDrink() {
            const name = prompt('–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–ø–∏—Ç–∫–∞:');
            if (name && name.trim()) {
                const percent = parseInt(prompt('–®–∞–Ω—Å –≤—ã–ø–∞–¥–µ–Ω–∏—è (%) –æ—Ç 1 –¥–æ 100:', '10'));
                if (percent >= 1 && percent <= 100) {
                    drinks.push({ 
                        name: name.trim(), 
                        percent: percent, 
                        color: colors[drinks.length % colors.length] 
                    });
                    renderDrinks();
                    drawWheel(drinkCtx, drinkCanvas, drinks);
                } else {
                    alert('–®–∞–Ω—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1 –¥–æ 100!');
                }
            }
        }

        function deleteDrink(index) {
            if (drinks.length <= 1) {
                alert('–î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –Ω–∞–ø–∏—Ç–æ–∫!');
                return;
            }
            drinks.splice(index, 1);
            drinks.forEach((d, i) => d.color = colors[i % colors.length]);
            renderDrinks();
            drawWheel(drinkCtx, drinkCanvas, drinks);
        }

        function renderPlayers() {
            const list = document.getElementById('players-list');
            const count = document.getElementById('player-count');
            const display = document.getElementById('players-count-display');

            count.textContent = players.length;
            display.textContent = players.length;

            list.innerHTML = players.map((p, i) => `
                <div class="flex items-center justify-between bg-zinc-800/50 hover:bg-zinc-800 p-3 rounded-lg group transition-all">
                    <div class="flex items-center gap-x-2">
                        <div class="w-4 h-4 rounded-full" style="background-color: #${p.color}"></div>
                        <span class="font-medium text-sm">${p.name}</span>
                    </div>
                    <button onclick="deletePlayer(${i})" class="text-zinc-500 hover:text-red-400 transition-colors text-lg opacity-0 group-hover:opacity-100">
                        ‚úï
                    </button>
                </div>
            `).join('');
        }

        function renderDrinks() {
            const list = document.getElementById('drinks-list');
            const count = document.getElementById('drink-count');
            const display = document.getElementById('drinks-count-display');

            count.textContent = drinks.length;
            display.textContent = drinks.length;

            list.innerHTML = drinks.map((d, i) => `
                <div class="flex items-center justify-between bg-zinc-800/50 hover:bg-zinc-800 p-3 rounded-lg group transition-all">
                    <div class="flex items-center gap-x-2 flex-1">
                        <div class="w-4 h-4 rounded-full" style="background-color: #${d.color}"></div>
                        <span class="font-medium text-sm">${d.name}</span>
                    </div>
                    <div class="flex items-center gap-x-2">
                        <span class="text-xs font-mono text-zinc-400">${d.percent}%</span>
                        <button onclick="deleteDrink(${i})" class="text-zinc-500 hover:text-red-400 transition-colors text-lg opacity-0 group-hover:opacity-100">
                            ‚úï
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function togglePlayers() {
            const list = document.getElementById('players-list');
            const icon = document.getElementById('players-toggle');
            list.classList.toggle('collapsed');
            icon.classList.toggle('collapsed');
        }

        function toggleDrinks() {
            const list = document.getElementById('drinks-list');
            const icon = document.getElementById('drinks-toggle');
            list.classList.toggle('collapsed');
            icon.classList.toggle('collapsed');
        }

        function showSettings() {
            document.getElementById('settings-modal').classList.remove('hidden');
            document.getElementById('spin-duration-input').value = spinDuration / 1000;
            renderDrinksSettings();
        }

        function hideSettings() {
            document.getElementById('settings-modal').classList.add('hidden');
        }

        function renderDrinksSettings() {
            const container = document.getElementById('drinks-settings');
            container.innerHTML = drinks.map((d, i) => `
                <div class="flex items-center gap-x-3 bg-zinc-800/50 p-4 rounded-xl">
                    <div class="w-6 h-6 rounded-full flex-shrink-0" style="background-color: #${d.color}"></div>
                    <div class="flex-1 min-w-0">
                        <label class="text-sm font-medium truncate block mb-2">${d.name}</label>
                        <div class="flex items-center gap-x-3">
                            <input type="range" min="1" max="100" value="${d.percent}" 
                                   oninput="updateDrinkPercent(${i}, this.value); document.getElementById('percent-${i}').textContent = this.value + '%'; document.getElementById('slider-${i}').value = this.value" 
                                   class="flex-1">
                            <input type="number" min="1" max="100" value="${d.percent}" 
                                   oninput="updateDrinkPercent(${i}, this.value); document.getElementById('percent-${i}').textContent = this.value + '%'; this.previousElementSibling.value = this.value" 
                                   id="slider-${i}"
                                   class="w-16 bg-zinc-700 text-white px-2 py-1 rounded text-sm font-mono focus:outline-none focus:ring-2 focus:ring-amber-400">
                            <span id="percent-${i}" class="text-sm font-mono font-bold text-zinc-400 w-10 text-right">%</span>
                        </div>
                    </div>
                </div>
            `).join('');

            drinks.forEach((d, i) => {
                const percentSpan = document.getElementById(`percent-${i}`);
                if (percentSpan) {
                    percentSpan.textContent = d.percent + '%';
                }
            });
        }

        function saveSettings() {
            const inputValue = parseFloat(document.getElementById('spin-duration-input').value);
            if (inputValue >= 0.5 && inputValue <= 60) {
                spinDuration = inputValue * 1000;
                hideSettings();
                renderDrinks();
                drawWheel(drinkCtx, drinkCanvas, drinks);
            } else {
                alert('–í—Ä–µ–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 0.5 –¥–æ 60 —Å–µ–∫—É–Ω–¥!');
            }
        }

        function randomizeOdds() {
            const total = 100;
            let remaining = total;
            drinks.forEach((d, i) => {
                if (i === drinks.length - 1) {
                    d.percent = Math.max(1, remaining);
                } else {
                    const maxPossible = remaining - (drinks.length - i - 1);
                    d.percent = Math.max(1, Math.floor(Math.random() * maxPossible) + 1);
                    remaining -= d.percent;
                }
            });
            renderDrinksSettings();
        }

        function startWhoSpin() {
            if (players.length < 1) {
                alert('–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞!');
                return;
            }
            if (drinks.length < 1) {
                alert('–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –Ω–∞–ø–∏—Ç–æ–∫!');
                return;
            }

            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('who-wheel-screen').classList.remove('hidden');
            document.getElementById('current-stage').textContent = '–ö—Ç–æ?';
            document.getElementById('spin-status').textContent = '–í—Ä–∞—â–µ–Ω–∏–µ...';
            document.getElementById('who-spinning-text').style.display = 'block';
            document.getElementById('who-result').classList.add('hidden');
            document.getElementById('result-overlay').classList.remove('show');
            document.getElementById('who-winner').classList.remove('show');
            isSpinning = true;

            spinWhoWheel();
        }

        function spinWhoWheel() {
            const winnerIndex = Math.floor(Math.random() * players.length);

            const segmentAngle = (2 * Math.PI) / players.length;
            const targetAngle = winnerIndex * segmentAngle + segmentAngle / 2;
            const fullSpins = 5 + Math.random() * 3;
            const totalRotation = fullSpins * 2 * Math.PI + targetAngle;

            const duration = spinDuration;
            const startTime = Date.now();

            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);

                const easeOut = 1 - Math.pow(1 - progress, 4);
                const currentRotation = totalRotation * easeOut;

                drawWheel(whoCtx, whoCanvas, players, currentRotation);

                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    const finalWinnerIndex = getWinnerFromRotation(players, totalRotation);
                    const winner = players[finalWinnerIndex];
                    currentWho = winner.name;
                    showWhoResult();
                }
            }

            animate();
        }

        function showWhoResult() {
            document.getElementById('who-spinning-text').style.display = 'none';
            document.getElementById('spin-status').textContent = '–í—ã–±—Ä–∞–Ω: ' + currentWho;
            document.getElementById('who-name').textContent = currentWho;
            document.getElementById('who-winner').textContent = currentWho;
            document.getElementById('who-winner').classList.add('show');
            document.getElementById('who-result').classList.remove('hidden');
            document.getElementById('result-overlay').classList.add('show');

            document.getElementById('drink-btn').onclick = startDrinkSpin;
            isSpinning = false;
        }

        function startDrinkSpin() {
            document.getElementById('who-wheel-screen').classList.add('hidden');
            document.getElementById('drink-wheel-screen').classList.remove('hidden');
            document.getElementById('current-stage').textContent = '–ß—Ç–æ –ø–∏—Ç—å?';
            document.getElementById('spin-status').textContent = '–í—Ä–∞—â–µ–Ω–∏–µ...';
            document.getElementById('drink-spinning-text').style.display = 'block';
            document.getElementById('drink-result').classList.add('hidden');
            document.getElementById('result-overlay').classList.remove('show');
            document.getElementById('drink-winner').classList.remove('show');
            isSpinning = true;

            spinDrinkWheel();
        }

        function spinDrinkWheel() {
            const totalPercent = drinks.reduce((sum, d) => sum + d.percent, 0);
            const random = Math.random() * totalPercent;
            let cumulative = 0;
            let winnerIndex = 0;

            for (let i = 0; i < drinks.length; i++) {
                cumulative += drinks[i].percent;
                if (random <= cumulative) {
                    winnerIndex = i;
                    break;
                }
            }

            const segmentAngle = (2 * Math.PI) / drinks.length;
            const targetAngle = winnerIndex * segmentAngle + segmentAngle / 2;
            const fullSpins = 5 + Math.random() * 3;
            const totalRotation = fullSpins * 2 * Math.PI + targetAngle;

            const duration = spinDuration;
            const startTime = Date.now();

            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);

                const easeOut = 1 - Math.pow(1 - progress, 4);
                const currentRotation = totalRotation * easeOut;

                drawWheel(drinkCtx, drinkCanvas, drinks, currentRotation);

                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    const finalWinnerIndex = getWinnerFromRotation(drinks, totalRotation);
                    currentDrink = drinks[finalWinnerIndex];
                    showDrinkResult();
                }
            }

            animate();
        }

        function showDrinkResult() {
            document.getElementById('drink-spinning-text').style.display = 'none';
            document.getElementById('spin-status').textContent = currentWho + ' –ø—å—ë—Ç ' + currentDrink.name;
            document.getElementById('drink-who').textContent = currentWho;
            document.getElementById('drink-name').textContent = currentDrink.name;
            document.getElementById('drink-percent').textContent = '–®–∞–Ω—Å: ' + currentDrink.percent + '%';
            document.getElementById('drink-winner').textContent = currentDrink.name;
            document.getElementById('drink-winner').classList.add('show');
            document.getElementById('drink-result').classList.remove('hidden');
            document.getElementById('result-overlay').classList.add('show');

            document.getElementById('finish-btn').onclick = finishDrink;
            isSpinning = false;
        }

        function finishDrink() {
            history.unshift(currentWho + ' ‚Üí ' + currentDrink.name);
            if (history.length > 20) history.pop();
            renderHistory();

            document.getElementById('drink-wheel-screen').classList.add('hidden');
            document.getElementById('final-result').classList.remove('hidden');
            document.getElementById('result-overlay').classList.remove('show');
            document.getElementById('current-stage').textContent = '–ì–æ—Ç–æ–≤–æ!';
            document.getElementById('final-who').textContent = currentWho;
            document.getElementById('final-drink').textContent = currentDrink.name;

            document.getElementById('reset-final-btn').onclick = resetGame;
            document.getElementById('share-btn').onclick = shareResult;
        }

        function renderHistory() {
            const list = document.getElementById('history-list');
            list.innerHTML = history.map((h, i) => `
                <div class="text-zinc-400 hover:text-zinc-300 transition-colors p-2 rounded">
                    <span class="font-mono text-xs text-zinc-600">#${i + 1}</span> ${h}
                </div>
            `).join('');
        }

        function clearHistory() {
            if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é?')) {
                history = [];
                renderHistory();
            }
        }

        function resetGame() {
            document.getElementById('setup-screen').classList.remove('hidden');
            document.getElementById('who-wheel-screen').classList.add('hidden');
            document.getElementById('drink-wheel-screen').classList.add('hidden');
            document.getElementById('final-result').classList.add('hidden');
            document.getElementById('who-result').classList.add('hidden');
            document.getElementById('drink-result').classList.add('hidden');
            document.getElementById('result-overlay').classList.remove('show');
            document.getElementById('current-stage').textContent = '–ì–æ—Ç–æ–≤–æ –∫ –∏–≥—Ä–µ';
            document.getElementById('spin-status').textContent = '–ù–∞—á–Ω–∏—Ç–µ –ø–µ—Ä–≤—ã–π —Å–ø–∏–Ω';
            currentWho = null;
            currentDrink = null;

            if (players.length > 0) drawWheel(whoCtx, whoCanvas, players);
            drawWheel(drinkCtx, drinkCanvas, drinks);
        }

        function shareResult() {
            if (currentWho && currentDrink) {
                const text = `${currentWho} –ø—å—ë—Ç ${currentDrink.name}! üçª #–ö–æ–ª–µ—Å–æ–ü—å—è–Ω—Å—Ç–≤–∞`;
                if (navigator.share) {
                    navigator.share({ title: '–ö–æ–ª–µ—Å–æ –ü—å—è–Ω—Å—Ç–≤–∞', text: text });
                } else {
                    alert(text);
                }
            }
        }

        renderPlayers();
        renderDrinks();
        drawWheel(drinkCtx, drinkCanvas, drinks);
    </script>
</body>
</html>
